{"ast":null,"code":"import{useState,useEffect}from'react';import axios from'axios';export const useDeezer=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const makeRequest=async requestFn=>{setLoading(true);setError(null);try{const result=await requestFn();return result;}catch(err){var _err$response,_err$response$data;const errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message||'Something went wrong';setError(errorMessage);throw new Error(errorMessage);}finally{setLoading(false);}};const searchMusic=async function(query){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'track';let limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:25;return makeRequest(async()=>{const response=await axios.get('/api/music/search',{params:{q:query,type,limit}});return response.data;});};const getTrack=async id=>{return makeRequest(async()=>{const response=await axios.get(\"/api/music/track/\".concat(id));return response.data;});};const getAlbum=async id=>{return makeRequest(async()=>{const response=await axios.get(\"/api/music/album/\".concat(id));return response.data;});};const getArtist=async id=>{return makeRequest(async()=>{const response=await axios.get(\"/api/music/artist/\".concat(id));return response.data;});};const getChart=async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;return makeRequest(async()=>{const response=await axios.get('/api/music/chart',{params:{limit}});return response.data;});};const getGenres=async()=>{return makeRequest(async()=>{const response=await axios.get('/api/music/genres');return response.data;});};const getTracksByGenre=async function(genreId){let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:25;return makeRequest(async()=>{const response=await axios.get(\"/api/music/genre/\".concat(genreId,\"/tracks\"),{params:{limit}});return response.data;});};return{loading,error,searchMusic,getTrack,getAlbum,getArtist,getChart,getGenres,getTracksByGenre};};// Hook for searching with debouncing\nexport const useSearch=function(){let initialQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';let delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;const[query,setQuery]=useState(initialQuery);const[debouncedQuery,setDebouncedQuery]=useState(initialQuery);const[results,setResults]=useState(null);const{searchMusic,loading,error}=useDeezer();// Debounce search query\nuseEffect(()=>{const timer=setTimeout(()=>{setDebouncedQuery(query);},delay);return()=>clearTimeout(timer);},[query,delay]);// Perform search when debounced query changes\nuseEffect(()=>{if(debouncedQuery.trim()){performSearch(debouncedQuery);}else{setResults(null);}},[debouncedQuery]);const performSearch=async searchQuery=>{try{const data=await searchMusic(searchQuery);setResults(data);}catch(err){console.error('Search failed:',err);setResults(null);}};return{query,setQuery,results,loading,error,performSearch};};","map":{"version":3,"names":["useState","useEffect","axios","useDeezer","loading","setLoading","error","setError","makeRequest","requestFn","result","err","_err$response","_err$response$data","errorMessage","response","data","message","Error","searchMusic","query","type","arguments","length","undefined","limit","get","params","q","getTrack","id","concat","getAlbum","getArtist","getChart","getGenres","getTracksByGenre","genreId","useSearch","initialQuery","delay","setQuery","debouncedQuery","setDebouncedQuery","results","setResults","timer","setTimeout","clearTimeout","trim","performSearch","searchQuery","console"],"sources":["/workspace/frontend/src/hooks/useDeezer.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nexport const useDeezer = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const makeRequest = async (requestFn) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      const result = await requestFn();\n      return result;\n    } catch (err) {\n      const errorMessage = err.response?.data?.error || err.message || 'Something went wrong';\n      setError(errorMessage);\n      throw new Error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const searchMusic = async (query, type = 'track', limit = 25) => {\n    return makeRequest(async () => {\n      const response = await axios.get('/api/music/search', {\n        params: { q: query, type, limit }\n      });\n      return response.data;\n    });\n  };\n\n  const getTrack = async (id) => {\n    return makeRequest(async () => {\n      const response = await axios.get(`/api/music/track/${id}`);\n      return response.data;\n    });\n  };\n\n  const getAlbum = async (id) => {\n    return makeRequest(async () => {\n      const response = await axios.get(`/api/music/album/${id}`);\n      return response.data;\n    });\n  };\n\n  const getArtist = async (id) => {\n    return makeRequest(async () => {\n      const response = await axios.get(`/api/music/artist/${id}`);\n      return response.data;\n    });\n  };\n\n  const getChart = async (limit = 50) => {\n    return makeRequest(async () => {\n      const response = await axios.get('/api/music/chart', {\n        params: { limit }\n      });\n      return response.data;\n    });\n  };\n\n  const getGenres = async () => {\n    return makeRequest(async () => {\n      const response = await axios.get('/api/music/genres');\n      return response.data;\n    });\n  };\n\n  const getTracksByGenre = async (genreId, limit = 25) => {\n    return makeRequest(async () => {\n      const response = await axios.get(`/api/music/genre/${genreId}/tracks`, {\n        params: { limit }\n      });\n      return response.data;\n    });\n  };\n\n  return {\n    loading,\n    error,\n    searchMusic,\n    getTrack,\n    getAlbum,\n    getArtist,\n    getChart,\n    getGenres,\n    getTracksByGenre\n  };\n};\n\n// Hook for searching with debouncing\nexport const useSearch = (initialQuery = '', delay = 500) => {\n  const [query, setQuery] = useState(initialQuery);\n  const [debouncedQuery, setDebouncedQuery] = useState(initialQuery);\n  const [results, setResults] = useState(null);\n  const { searchMusic, loading, error } = useDeezer();\n\n  // Debounce search query\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedQuery(query);\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [query, delay]);\n\n  // Perform search when debounced query changes\n  useEffect(() => {\n    if (debouncedQuery.trim()) {\n      performSearch(debouncedQuery);\n    } else {\n      setResults(null);\n    }\n  }, [debouncedQuery]);\n\n  const performSearch = async (searchQuery) => {\n    try {\n      const data = await searchMusic(searchQuery);\n      setResults(data);\n    } catch (err) {\n      console.error('Search failed:', err);\n      setResults(null);\n    }\n  };\n\n  return {\n    query,\n    setQuery,\n    results,\n    loading,\n    error,\n    performSearch\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}